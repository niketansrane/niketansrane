<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Authentication: A Simple Dive into OAuth 2.0 - Niketan Rane</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background-color: #0a0a0a;
            padding: 20px;
        }
        
        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 20px 20px 40px 20px;
            background-color: #ffffff;
            min-height: 100vh;
        }
        
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .name-section h1 {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 0;
            letter-spacing: -0.02em;
        }
        
        .name-section h1 a {
            color: #1a1a1a;
            text-decoration: none;
        }
        
        .name-section h1 a:hover {
            color: #666;
        }
        
        .contact-links {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 16px;
        }
        
        .contact-links a {
            color: #666;
            text-decoration: none;
            transition: color 0.2s;
            display: flex;
            align-items: center;
        }
        
        .contact-links a:hover {
            color: #0066cc;
        }
        
        .contact-links svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        nav {
            margin: 0 0 40px 0;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e5e5;
        }
        
        nav a {
            color: #666;
            text-decoration: none;
            font-size: 0.95em;
            margin-right: 20px;
            transition: color 0.2s;
        }
        
        nav a:hover {
            color: #1a1a1a;
        }
        
        article header {
            margin-bottom: 40px;
        }
        
        article h1 {
            font-size: 2.2em;
            font-weight: 600;
            margin-bottom: 15px;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }
        
        .post-meta {
            color: #888;
            font-size: 0.95em;
        }
        
        article h2 {
            font-size: 1.5em;
            font-weight: 600;
            margin-top: 36px;
            margin-bottom: 16px;
            letter-spacing: -0.01em;
        }
        
        article h3 {
            font-size: 1.3em;
            font-weight: 600;
            margin-top: 32px;
            margin-bottom: 12px;
        }
        
        article p {
            color: #333;
            font-size: 1.05em;
            margin-bottom: 20px;
            line-height: 1.7;
        }
        
        article ul, article ol {
            margin: 20px 0;
            padding-left: 28px;
        }
        
        article li {
            color: #333;
            font-size: 1.05em;
            margin-bottom: 10px;
            line-height: 1.7;
        }
        
        article blockquote {
            border-left: 3px solid #e5e5e5;
            padding-left: 20px;
            margin: 24px 0;
            color: #666;
            font-style: italic;
        }
        
        article code {
            background-color: #f5f5f5;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            font-size: 0.9em;
            color: #c7254e;
        }
        
        article pre {
            background-color: #f5f5f5;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 24px 0;
        }
        
        article pre code {
            background-color: transparent;
            padding: 0;
            color: #333;
        }
        
        article img {
            max-width: 100%;
            height: auto;
            margin: 24px 0;
            border-radius: 6px;
        }
        
        article a {
            color: #0066cc;
            text-decoration: none;
        }
        
        article a:hover {
            text-decoration: underline;
        }
        
        strong, b {
            font-weight: 600;
            color: #1a1a1a;
        }
        
        em, i {
            font-style: italic;
        }
        
        hr {
            border: none;
            border-top: 1px solid #e5e5e5;
            margin: 40px 0;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px 15px 30px 15px;
            }
            
            .top-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .contact-links {
                align-self: flex-start;
            }
            
            .name-section h1 {
                font-size: 1.5em;
            }
            
            article h1 {
                font-size: 1.8em;
            }
            
            article h2 {
                font-size: 1.3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <div class="name-section">
                <h1><a href="../index.html">Niketan Rane</a></h1>
            </div>
            <div class="contact-links">
                <a href="https://github.com/niketansrane" target="_blank" aria-label="GitHub">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <a href="https://linkedin.com/in/niketansrane" target="_blank" aria-label="LinkedIn">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <a href="https://twitter.com/niketansrane" target="_blank" aria-label="Twitter">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
                <a href="mailto:niketan.iiita@gmail.com" aria-label="Email">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                    </svg>
                </a>
            </div>
        </div>
        
        <nav>
            <a href="index.html">← Blog</a>
            <a href="../index.html">Home</a>
        </nav>
        
        <article>
            <header>
                <h1>Understanding Authentication: A Simple Dive into OAuth 2.0</h1>
                <div class="post-meta">October 2024</div>
            </header>
            
            <p>In this article, we'll explore how authentication works—from basic password-based login to modern, secure methods like OpenID Connect—through the lens of a simple library app. The source code can be found at <a href="https://github.com/niketansrane/auth101" target="_blank">https://github.com/niketansrane/auth101</a>.</p>

            <h2>1. The library problem</h2>
            
            <p>Let's say you run a little library in your hometown and you want to keep track of:</p>
            <ul>
                <li>who borrowed which books,</li>
                <li>when the books were borrowed</li>
                <li>return due dates</li>
                <li>contact details like name and address.</li>
            </ul>

            <p>And you have decided to build a small website to do so. For all future references, words library and website are used interchangeably.</p>

            <p>In your library, a user's digital identity could be as simple his/her name, phone number and address. Whenever someone logs in your library, they should be able to see:</p>
            <ul>
                <li>all books they have borrowed</li>
                <li>when to return them back.</li>
            </ul>

            <h2>2. Shared Secrets</h2>

            <p>Now every time a user logs in, you will have to retrieve all the books which are borrowed by that particular user and display them on the page.</p>

            <p>How would you make sure that only information for that particular user is shown and the user is actually the person he claims to be and not someone else?</p>

            <p>The simplest approach is you(library) and each user can agree on a shared secret of some kind.</p>

            <p>Each time user tries to log in, he presents the shared secret and the website will be like, "since you have the secret value only you and me could have known, I will let you in and here are the books that you have borrowed from the library." In this case the website authenticated the user.</p>

            <p>Almost always the shared secret is what we call the password. In typical flow, a user signs up to your website using a combination of username and password. You do not store the plain password in your storage, because if you do so and your storage gets compromised, the attacker has access to passwords for all users. Instead you use a hash function to make it obscure.</p>

            <p>Once the user signs up, every time a he tries to login to the library, you check if credentials match and if yes, allow him in.</p>

            <p>This is called <strong>Password Based Authentication</strong>.</p>

            <p>Implementation in Python using the bcrypt library.</p>

            <pre><code class="language-python">import bcrypt

def hash_password(password: str) -> bytes:
    """
    Hash the plaintext password using a brypt with salt.
    """
    return bcrypt.hashpw(password.encode(), bcrypt.gensalt())

def verify_password(password: str, hashed_pwd: bytes) -> bool:
    """
    Validate if the given password (after hashing) will match with `hashed`.
    """
    return bcrypt.checkpw(password.encode(), hashed_pwd)

# Example.py
password = "ilovebooks"
hashed_pwd = hash_password(password)
print(hashed_pwd) # outputs => b'$2b$12$mWaihxsvGxYNwzq4Ueozu.hgvjVC5dIKFX...'
print(verify_password("ilovebooks", hashed_pwd)) # outputs => True
print(verify_password("idonotlovebooks", hashed_pwd)) # outputs => False</code></pre>

            <h2>3. Delegated/Federated Authentication</h2>

            <p>So far so good. Now let's say you have a friend who runs a startup and he wants all his employees to access your library. But he does not like the idea of each employee creating a separate account with new password. Instead, he wants users from his company @friendstartup.com to login using their existing credentials.</p>

            <p>This is a classic case where a user can sign in at one place (friendsstartup.com) and then show proof of sign-in in another place and gain access. This is called <strong>federated authentication</strong>.</p>

            <p>My front-end will now support another login option. sign in with friendsstartup.com.</p>

            <p>If the user chooses that option, my auth middleware will redirect user to friendsstartup.com for authentication and say, "can you please authenticate the user for me and once you are done, please share his email and name with me".</p>

            <p>(There are prerequisites you will have to do with friendsstartup.com beforehand but let's skip those for now.)</p>

            <p>This is powered by the <strong>OpenID protocol</strong>. OpenID is just what the name suggest. Open + ID => Open (standard) protocol for identification.</p>

            <p>So now instead of saving user name and password in your auth database, you will instead receive id information from friendsstartup.com saying that I have verified this user and his id is alias3@friendsstartup.com. You can then use this information to login the user and show his books.</p>

            <p>So rather than managing the user credentials yourself, you delegate them to a trusted provider(friendstartup.com, or even Google/Microsoft etc.)</p>

            <hr>

            <p>In this article, we explored how authentication starts with shared secrets and scales up to secure, federated login using OpenID Connect.</p>

            <p>In the next article, I'll walk you through actual implementation code—how to set up password-based login and integrate OpenID in a FastAPI app step-by-step.</p>

            <p>Stay tuned!</p>
            
        </article>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</body>
</html>
